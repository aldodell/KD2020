<html>

<meta charset="UTF-8">


<body>
    <script src="api.js"></script>
    <script>

        var kernel = new KDKernel();
        var desktop = new KDDesktop(kernel).build().publish();

        var m = new KDMessage("a", "b");
        m.set("clave", "valor");
        desktop.broadcastRemoteMessage(m);

        PARAR();


        class ExampleApp extends KDApplication {
            constructor(dkDesktop) {
                super(dkDesktop, "mario");
                this.iconURL = "media/mario.jpg";
                this.title = "Mario Bros 1";

                var windowSize = new KDSize(400, 400);
                this.mainWindow = new KDWindow()
                    .build()
                    .publish(dkDesktop)
                    .setSize(windowSize)
                    .setPosition(KDPosition.centerScreen(windowSize))
                    .hide()
                    .setTitle("Mario Bros main window");

                this.spriteViewer = new KDSpriteViewer().build()
                    .publish(this.mainWindow.body)
                    .loadImage("media/mario2.png", 738, 603)
                    .setPosition(new KDPosition(100, 100))
                    .setParameters(7, 449, 16, 33, 12, 13, 7)
                    .showSprite(0, 2);

            }
            run() {
                this.mainWindow.show();
                return "Mario!!";
            }
        };



        desktop.addApplicationClass(ExampleApp);
        desktop.addApplicationClass(KDTerminal);
        desktop.addApplicationClass(KDTerminalClock);
        desktop.addApplicationClass(KDTerminalAlert);
        desktop.addApplicationClass(KDMessageSender);
        desktop.addApplicationClass(KDCreateUser);
        desktop.addApplicationClass(KDLoadUser);
        desktop.addApplicationClass(KDShowUser);

        desktop.run();
        desktop.startRequestMessages();





    </script>
</body>

</html>