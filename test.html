<html>

<meta charset="UTF-8">


<body>
    <script src="api.js"></script>
    <script>




        var desktop = new KDDesktop().build().publish();;

        class ExampleApp extends KDApplication {
            constructor(dkDesktop) {
                super(dkDesktop, "mario");
                this.iconURL = "media/mario.jpg";
                this.title = "Mario Bros 1";

                var windowSize = new KDSize(400, 400);
                this.mainWindow = new KDWindow()
                    .build()
                    .publish(dkDesktop)
                    .setSize(windowSize)
                    .setPosition(KDPosition.centerScreen(windowSize))
                    .hide()
                    .setTitle("Mario Bros main window");

                this.spriteViewer = new KDSpriteViewer().build()
                    .publish(this.mainWindow.body)
                    .loadImage("media/mario2.png", 738, 603)
                    .setPosition(new KDPosition(100, 100))
                    .setParameters(7, 449, 16, 33, 12, 13, 7)
                    .showSprite(0, 2);

                    this.processMessage = function(kdMessage) {
                        alert(kdMessage.getValue("a"));
                    }

            }
            run() {
                this.mainWindow.show();
                return "Mario!!";
            }
        };


        //var exampleApp = new ExampleApp(desktop);

        desktop.addApplicationClass(ExampleApp);
        desktop.addApplicationClass(KDTerminal);
        desktop.addApplicationClass(KDTerminalClock);
        desktop.addApplicationClass(KDTerminalAlert);
        desktop.addApplicationClass(KDMessageSender);
        desktop.addApplicationClass(QQSM);
        desktop.addApplicationClass(QQSM_control);

        


        desktop.run();




        /*
                var kdwin = new KDWindow();
                kdwin.publish()
                    .setSize(new KDSize(400, 200))
                    .setPosition(new KDPosition(100, 100))
                    .setTitle("Hello world!");


                var l1 = new KDLayer();
                kdwin.add(l1);
                l1.setPosition(new KDPosition(10, 10)).setSize(new KDSize(100, 20));

                var b1 = new KDButton();
                kdwin.add(b1);
                b1.setPosition(new KDPosition(10, 50)).setSize(new KDSize(100, 20));


                var im = new KDImage().build();
                im.setSource("media/mario.jpg")
                    .setSize(new KDSize(100, 100));


                kdwin.add(im);

        */








    </script>
</body>

</html>